/*
 Template: Fullscreen;
 Type: Debug Template with console.log;
 Created: For Kommersant;
 */

(function(AdFox_1199607893_s){
    var AdFox_1199607893_i = document.createElement('IMG'), AdFox_1199607893_b = document.body;
    AdFox_1199607893_i.style.position = 'absolute'; AdFox_1199607893_i.style.width = AdFox_1199607893_i.style.height = '0px';
    AdFox_1199607893_i.onload = AdFox_1199607893_i.onerror = function(){AdFox_1199607893_b.removeChild(AdFox_1199607893_i);	AdFox_1199607893_i = AdFox_1199607893_b = null}
    AdFox_1199607893_i.src = AdFox_1199607893_s;
    AdFox_1199607893_b.insertBefore(AdFox_1199607893_i, AdFox_1199607893_b.firstChild);
})('http://content.adfox.ru/transparent.gif');

var events464256 = '';
events464256 += 'event_1=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Db&event_2=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dc&event_3=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dd&event_4=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3De&event_5=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Df&';
events464256 += 'event_6=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dg&event_7=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dh&event_8=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Di&event_9=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dj&event_10=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dk&';
events464256 += 'event_11=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dl&event_12=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dm&event_13=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dn&event_14=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Do&event_15=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dp&';
events464256 += 'event_16=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dq&event_17=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dr&event_18=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Ds&event_19=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Dt&event_20=http%3A//ads%2Eadfox%2Eru/168627/event%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd%26lts%3Deohdeyj%26pm%3Du';

var vlink464256 = (''=='') ? 'none' : '';

var flashVars464256 = 'timerClose=10&bannerID=464256&link1=http%3A//ads%2Eadfox%2Eru/168627/goLink%3Fp2%3Dekwz%26p1%3Dbcysu%26p5%3Dbakua%26pr%3Ddwzcpxd&vlink=' + vlink464256 + '&target=_top&' + events464256;

var inputParams464256 = {
    movieSrc: '{{server}}{{file}}',
    imageSrc: '{{server}}{{image}}',
    widthCreative: '100%',
    heightCreative: '100%',
    reference: 'http://ads.adfox.ru/168627/goLink?p2=ekwz&p1=bcysu&p5=bakua&pr=dwzcpxd',
    target: '_top',
    wmode: 'transparent',
    bgColor: '#000000',
    opacity: 50,
    timerClose: 10,
    isControlPanel: true,
    isCountDown: false,
    heightPanel: '30px',
    imgLogo: '',
    imgClose: '',
    textTimer: '',
    textClose: '',
    bgColorPanel: '',
    bgImagePanel: '',
    colorText: '',
    fontFamily: 'Georgia, Serif',
    fontSize: '16px',
    fontWeight: '400',
    paddingPanel: '5px 10px',
    flashVars: flashVars464256,
    widthImg: ('100%' == '100%') ? '1900' : '100%',
    heightImg: ('100%' == '100%') ? '900' : '100%',
    timerCloseAutomat: ('' == '') ? (10 * 2) : ''
}

//Debug!!!
for(var p in inputParams464256)
{
    console.log('PARAMS: ', p, '=', inputParams464256[p]);
}

function mixin464256(dst) {
    for(var i=1; i<arguments.length; i++) {
        var obj = arguments[i];
        for(var key in obj) {
            dst[key] = obj[key];
        }
    }
    return dst;
}

/* Constructor mixin - general methods (functions) */
var GeneralMethodsMixin464256 = {
    /* Get the object size (width, height) and position (left, top)  */
    getGeometryObj: function(obj) {
        var param = {};
        param.w = obj.offsetWidth;
        param.h = obj.offsetHeight;
        param.l = 0;
        param.t = 0;
        while (obj)
        {
            param.l += obj.offsetLeft;
            param.t += obj.offsetTop;
            obj = obj.offsetParent;
        }
        return param;
    },

    /*Get the browser window size (clientWidth and clientHeight) and scrolling (scrollLeft and scrollTop, scrollWidth and scrollHeight)*/
    getGeometryWindow: function() {
        var param = {};
        var d = document, db = d.body, de = d.documentElement, dc = d.compatMode == "CSS1Compat";
        param.cw = dc && de.clientWidth || self.innerWidth || db.clientWidth;
        param.ch = dc && de.clientHeight || self.innerHeight || db.clientHeight;
        param.sl = self.pageXOffset || dc && de.scrollLeft || db.scrollLeft;
        param.st = self.pageYOffset || dc && de.scrollTop || db.scrollTop;
        param.sh = dc && de.scrollHeight || db.scrollHeight || db.offsetHeight;
        param.sw = dc && de.scrollWidth || db.scrollWidth || db.offsetWidth;
        param.sh = param.sh < param.ch ? param.ch : param.sh;
        return param;
    },

    addEvent: function(e, t, f) {
        if (e.addEventListener) e.addEventListener(t, f, false);
        else if (e.attachEvent) e.attachEvent('on'+t, f);
    },

    removeEvent: function(e, t, f) {
        if (e.removeEventListener) e.removeEventListener(t, f, false);
        else if (e.detachEvent) e.detachEvent('on'+t, f);
    },

    getElement: function(id) {
        return document.getElementById(id);
    },

    unloadObject: function(attribute, html) {
        //Debug;
        console.log('unloadObject', 'this=', this, 'html=', html, 'document.body=', document.body);
        var b = document.body;
        if (b) {
            var
                de = document.createElement("div"),
                des = de.style;
            de.id = attribute.id;
            des.width = attribute.width;
            des.height = attribute.height;
            des.position = attribute.position;
            des.zIndex = attribute.zIndex;
            des.left = attribute.left;
            des.top = attribute.top;
            b.appendChild(de);
            if (html) de.innerHTML = html;
        }
    },

    getStyle: function(objStyle) {
        var style = '';
        for (var key in objStyle) {
            style += key + ':' + objStyle[key] + ';';
        }
        return style;
    },

    kill: function() {
        //Debug!!!
        var elem = this.getElement(this._id);
        if(elem)
        {
            console.log('kill:SUCCESS', 'this=', this, 'this._id', this._id, 'elem', elem);
            elem.style.display = 'none';
        }
        else
        {
            console.log('kill:FAILURE', 'this=', this, 'this._id', this._id, 'elem', elem);
        }
    },

    resizeObject: function() {
        var p = this.getGeometryWindow();
        this._widthNow = (this._width == '100%' || parseFloat(this._width) > p.cw) ? p.cw + 'px' : this._width;
        this._heightNow = (this._height == '100%' || parseFloat(this._height) > p.ch) ? p.ch + 'px' : this._height;
        this._left = (p.cw - parseFloat(this._widthNow)) / 2 + 'px';
        var t = (p.ch - parseFloat(this._heightNow ) + parseFloat(this._heightPanel)) / 2;
        if (t < parseFloat(this._heightPanel)) this._top = parseFloat(this._heightPanel) + 'px';
        else this._top = t + 'px';
    },

    updateGeometryObject: function() {
        this.resizeObject();
        //Debug!!!
        var obj = this.getElement(this._id);
        if(obj)
        {
            console.log('updateGeometryObject|SUCCESS|, this=', this, 'obj=', obj, 'this._id=', this._id);
            obj.style.width = this._widthNow;
            obj.style.height = this._heightNow;
            obj.style.left = this._left;
            obj.style.top = this._top;
        }
        else
        {
            console.log('updateGeometryObject|FAILURE|, this=', this, 'obj=', obj, 'this._id=', this._id);
        }
    },

    playEventResize: function() {
        var self = this;
        this.addEvent(window, 'resize', function(){self.updateGeometryObject();});
    },

    resizeWidth: function() {
        var p = this.getGeometryWindow();
        this._widthNow = (this._width == '100%' || parseFloat(this._width) > p.cw) ? p.cw + 'px' : this._width;
    },

    updateWidth: function() {
        this.resizeWidth();
        var obj = this.getElement(this._id);
        if(obj)
        {
            console.log('updateWidth|SUCCESS|, this=', this, 'obj=', obj, 'this._id=', this._id);
            obj.style.width = this._widthNow;
        }
        else
        {
            console.log('updateWidth|FAILURE|, this=', this, 'obj=', obj, 'this._id=', this._id);
        }
    },

    resizeHeight: function() {
        var p = this.getGeometryWindow();
        this._heightNow = (this._height == '100%' || parseFloat(this._height) > p.ch) ? p.ch + 'px' : this._height;
    },

    updateHeight: function() {
        this.resizeHeight();
        var obj = this.getElement(this._id);
        if(obj)
        {
            console.log('updateHeight|SUCCESS|, this=', this, 'obj=', obj, 'this._id=', this._id);
            obj.style.height = this._heightNow;
        }
        else
        {
            console.log('updateHeight|FAILURE|, this=', this, 'obj=', obj, 'this._id=', this._id);
        }
    },

    playEventResizeWidth: function() {
        var self = this;
        this.addEvent(window, 'resize', function(){self.updateWidth();});
    },

    playEventResizeHeight: function() {
        var self = this;
        this.addEvent(window, 'resize', function(){self.updateHeight();});
    }
};

/**********************************************/
/*************Constructor Overlay**************/
/**********************************************/
function Overlay464256(setOfStyle) {
    console.log('CONSTRUCTOR: ', arguments.callee.name);
    this._id = 'overlay';
    this._setOfStyle = setOfStyle;

    this._width = setOfStyle.width;
    this._height = setOfStyle.height;

    this._widthNow = this._width;
    this._heightNow = this._height;
}

mixin464256(Overlay464256.prototype, GeneralMethodsMixin464256, {
    toString: function() {
        return this._setOfStyle;
    },

    getHtml: function() {
        return '<div style="' + this.getStyle(this._setOfStyle) + '"></div>';
    },

    unload: function() {
        this.resizeWidth();
        this.resizeHeight();
        var setOfStyleOverlay = {
            id: this._id,
            width: this._widthNow,
            height: this._heightNow,
            position: 'absolute',
            zIndex: 9999999,
            top: '0px',
            left: '0px'
        }
        this.unloadObject(setOfStyleOverlay, this.getHtml());
        this.playEventResizeWidth();
        this.playEventResizeHeight();
    }
});

/**********************************************/
/*********Constructor Control Panel**************/
/**********************************************/
function ControlPanel464256(parameters, style) {
    console.log('CONSTRUCTOR: ', arguments.callee.name);
    var imgDefault = 'http://content.adfox.ru/transparent.gif';

    this._id = 'controlPanel';
    this._idClose = 'closeBanner';
    this._idSeconds = 'adfoxSeconds';

    this._timerClose = parameters.timerClose;

    this._imgLogo = parameters.imgLogo || imgDefault;
    this._imgClose = parameters.imgClose || imgDefault;
    this._textTimer = parameters.textTimer || '&#1040;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1081; &#1087;&#1077;&#1088;&#1077;&#1093;&#1086;&#1076; &#1085;&#1072; &#1089;&#1072;&#1081;&#1090; &#1095;&#1077;&#1088;&#1077;&#1079;';
    this._textClose = parameters.textClose || '&#1055;&#1088;&#1086;&#1087;&#1091;&#1089;&#1090;&#1080;&#1090;&#1100; &#1088;&#1077;&#1082;&#1083;&#1072;&#1084;&#1091; [&#1061;]';
    this.width = parameters.width;

    var s = style.controlPanel;
    s.height = s.height || '20px';
    s['background-color'] = s['background-color'] || '#000000';
    s['background-image'] = s['background-image'] ? 'url(\'' + s['background-image'] + '\')' : 'none';
    s['line-height'] = parseFloat(s.height) - parseFloat(s['font-size']) + parseFloat(s['padding'])*2 + 'px';
    s.color = s.color || '#ffffff';
    this._s = s;

    var spanStyle = {};
    for(key in s) {
        spanStyle[key] = s[key];
    }
    delete spanStyle.height;
    delete spanStyle['background-color'];
    delete spanStyle['background-image'];
    delete spanStyle['line-height'];
    delete spanStyle['padding'];
    this.span = this.getStyle(spanStyle);

    this._controlPanel = this.getStyle(s);
    this._infoLeft = this.getStyle(style.infoLeft);
    this._infoRight = this.getStyle(style.infoRight);
    this._infoLeftText = this.getStyle(style.infoLeftText);
    this._infoLeftImg = this.getStyle(style.infoLeftImg);
    this._infoRightText = this.getStyle(style.infoRightText);
    this._infoRightImg = this.getStyle(style.infoRightImg);

    this._width = '100%';
    this._widthNow = this._width;
}

mixin464256(ControlPanel464256.prototype, GeneralMethodsMixin464256, {
    toString: function() {
        return 'ControlPanel';
    },

    getHtml: function() {
        var obj = '';
        obj += '<div style="' + this._controlPanel + '"><center><div style="width:' + this.width + ';">';
        obj += '<div style="' + this._infoLeft + '">';
        obj += '<div style="' + this._infoLeftImg + '"><img src="' + this._imgLogo + '"></div>';
        obj += '<div style="' + this._infoLeftText + '">' + this._textTimer + '&nbsp;<span id="' + this._idSeconds + '" style="' + this.span + '"> ' + this._timerClose + ' </span>&nbsp;&#1089;&#1077;&#1082;&#1091;&#1085;&#1076;</div>';
        obj += '</div>';
        obj += '<div id="' + this._idClose + '" style="' + this._infoRight + '">';
        obj += '<div style="' + this._infoRightImg + '"><img src="' + this._imgClose + '"></div>';
        obj += '<div style="' + this._infoRightText + '">' + this._textClose + '</div>';
        obj += '</div>';
        obj += '</div></center></div>';
        return obj;
    },

    unload: function() {
        this.resizeWidth();
        var setOfStyleControlPanel = {
            id: this._id,
            width: this._widthNow,
            height: this._s.height,
            position: 'absolute',
            zIndex: 9999999999,
            top: '0px',
            left: '0px'
        }
        this.unloadObject(setOfStyleControlPanel, this.getHtml());
        this.buttonClose();
        this.playEventResizeWidth();
    },

    buttonClose: function() {
        var obj = this.getElement(this._idClose);
        this.addEvent(obj, 'click', function(){closeFullScreen464256();});
    },

    countDown: function(){
        var self = this;
        var obj = self.getElement(self._idSeconds);
        if(obj)
        {
            //Debug
            console.log('countDown:SUCCESS', 'self._timerClose=', self._timerClose);
            obj.innerHTML = self._timerClose;
            if (self._timerClose > 0) {
                setTimeout(function(){
                    self._timerClose--;
                    self.countDown();
                }, 1000);
            } else {
                closeFullScreen464256();
            }
        }
        else
        {
            console.log('countDown:FAILURE', 'obj=', obj, 'self._idSeconds', self._idSeconds, 'this=', this);
        }
    }
});

/**********************************************/
/**************Constructor Flash****************/
/**********************************************/
function Flash464256(parameters) {
    console.log('CONSTRUCTOR: ', arguments.callee.name);
    this._id = 'Flash';
    this._objectId = parameters.id || parameters.nameId || 'afFlashObject';
    this._embedName = parameters.name || parameters.nameId || 'afFlashEmbed';
    this._movie = parameters.movie || parameters.src;
    this._width = parameters.width || '100%';
    this._height = parameters.height || '100%';
    this._param = parameters.param;
    this._heightPanel =  parameters.heightPanel;

    this._widthNow = this._width;
    this._heightNow = this._height;
    this._left = '0px';
    this._top = '0px';
}

mixin464256(Flash464256.prototype, GeneralMethodsMixin464256, {
    _CODEBASE: 'http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0',

    _CLASSID: 'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000',

    _TYPE: 'application/x-shockwave-flash',

    _PLUGINPAGE: 'http://www.macromedia.com/go/getflashplayer',

    toString: function() {
        return 'Flash';
    },

    getParam: function(p) {
        var param = {};
        param.object = '';
        param.embed = '';
        for (var key in p) {
            param.object += '<param name="' + key + '" value="' + p[key] + '">';
            param.embed += key + '=' + p[key] + ' ';
        }
        return param;
    },

    getHtml: function() {
        var movie = this.getParam({movie: this._movie}),
            src = this.getParam({src: this._movie}),
            wh = 'width="100%" height="100%"',
            param = this.getParam(this._param),
            obj = '';

        obj += '<object id="' + this._objectId + '" ' + wh + ' classid="' + this._CLASSID + '" codebase="' + this._CODEBASE + '">' + movie.object + param.object;
        obj += '<embed name="' + this._embedName + '" ' + wh + src.embed + param.embed + ' type="' + this._TYPE + '" pluginspage="' + this._PLUGINPAGE + '"></embed></object>';
        return obj;
    },

    unload: function() {
        this.resizeObject();
        var setOfStyle = {
            id: this._id,
            width: this._widthNow,
            height: this._heightNow,
            position: 'absolute',
            zIndex: 999999999,
            top: this._top,
            left: this._left
        }
        this.unloadObject(setOfStyle, this.getHtml());
        this.playEventResize();
    }
});


/**********************************************/
/*********Constructor Default Image*************/
/*********************************************/
function DefaultImage464256(parametersA, parametersImg, heightPanel) {
    //Debug
    console.log('CONSTRUCTOR: ', arguments.callee.name);
    this._id = 'afDefaultImage';
    this._width = parametersImg.width;
    this._height = parametersImg.height;
    this.paramA = parametersA;
    this.paramImg = parametersImg;

    this._heightPanel = heightPanel;

    this._widthNow = this._width;
    this._heightNow = this._height;
    this._left = '0px';
    this._top = '0px';
}

mixin464256(DefaultImage464256.prototype, GeneralMethodsMixin464256, {
    toString: function() {
        return this._getImage();
    },

    getParam: function(p) {
        var param = '';
        for (var key in p) {
            param += key + '=' + p[key] + ' ';
        }
        return param;
    },

    getHtml: function() {
        return '<center><a ' + this.getParam(this.paramA) + '><img ' + this.getParam(this.paramImg) + '></a></center>';
    },

    unload: function() {
        this.resizeObject();
        var setOfStyle = {
            id: this._id,
            width: this._widthNow,
            height: this._heightNow,
            position: 'absolute',
            zIndex: 999999999,
            top: this._top,
            left: this._left
        }
        this.unloadObject(setOfStyle, this.getHtml());
        this.playEventResize();
    }
});

/*..........................................................................................*/
/* Scroll Bar hidden */
(function(){
    var bS = document.body.style;
    var bH = document.getElementsByTagName('html')[0].style;
    bS.overflow = "hidden";
    bH.overflow = "hidden";
})();

var checkPlugin464256 = function() {
    if (typeof navigator.plugins != "undefined" && typeof navigator.plugins["Shockwave Flash"] == "object") {
        d = navigator.plugins["Shockwave Flash"].description;
        return (d && !(typeof navigator.mimeTypes != "undefined" && navigator.mimeTypes["application/x-shockwave-flash"] && !navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin))
    } else if (typeof window.ActiveXObject != "undefined") {
        try {
            var d = new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version");
            return d?true:false;
        } catch(e) {
            return false;
        }
    }
};

var countDown464256 = function() {
    if (typeof(panel464256) != 'undefined') panel464256.countDown();
};

/* Scroll Bar visible and fullScreen hidden */
var closeFullScreen464256 = function() {

    setTimeout(function(){
        var bS = document.body.style;
        var bH = document.getElementsByTagName('html')[0].style;
        bS.overflow = 'visible';
        bS.overflow = 'auto';
        bH.overflow = 'auto';
        if (typeof(o464256) != 'undefined') o464256.kill();
        if (typeof(panel464256) != 'undefined') panel464256.kill();
        if (typeof(flash464256) != 'undefined') flash464256.kill();
        if (typeof(defaultImg464256) != 'undefined') defaultImg464256.kill();
    }, 500);
};

/* Automatic closing of the banner */

//Debug!!!
console.log('Setting automatic timer to:', inputParams464256.timerCloseAutomat);

setTimeout(function(){
    closeFullScreen464256();
}, inputParams464256.timerCloseAutomat * 1000);
//if inputParams464256.timerCloseAutomat is not set closeFullScreen464256 function is called immedeatly but asyncronously after 0.5 seconds;
/*..........................................................................................*/

var o464256 = new Overlay464256({
    'background-color': inputParams464256.bgColor,
    'width': '100%',
    'height': '100%',
    'filter': 'alpha('+inputParams464256.opacity+')',
    'filter': 'progid:DXImageTransform.Microsoft.Alpha(opacity='+inputParams464256.opacity+')',
    'opacity': inputParams464256.opacity*0.01
});
o464256.unload();

if (inputParams464256.isControlPanel || !checkPlugin464256()) {
    //Debug!!!
    console.log('CREATING CONTROL PANEL!!!', 'inputParams464256.isControlPanel', inputParams464256.isControlPanel, 'checkPlugin464256()', checkPlugin464256()  );
    var panel464256 = new ControlPanel464256({
        imgLogo: inputParams464256.imgLogo,
        imgClose: inputParams464256.imgClose,
        textTimer: inputParams464256.textTimer,
        textClose: inputParams464256.textClose,
        width: inputParams464256.widthCreative,
        timerClose: inputParams464256.timerClose
    }, {
        controlPanel: {
            'height': inputParams464256.heightPanel,
            'background-color': inputParams464256.bgColorPanel,
            'background-image': inputParams464256.bgImagePanel,
            'color': inputParams464256.colorText,
            'font-family': inputParams464256.fontFamily,
            'font-size': inputParams464256.fontSize,
            'font-weight': inputParams464256.fontWeight,
            'padding': inputParams464256.paddingPanel
        },
        infoLeft: {
            'float': 'left',
            'display': 'inline',
            'width': '60%'
        },
        infoRight: {
            'float': 'right',
            'display': 'inline',
            'width': '40%'
        },
        infoLeftText: {
            'float': 'left',
            'display': 'inline'
        },
        infoLeftImg: {
            'float': 'left',
            'display': 'inline',
            'padding': '0px 5px 0px 0px'
        },
        infoRightText: {
            'float': 'right',
            'display': 'inline',
            'cursor': 'pointer'
        },
        infoRightImg: {
            'float': 'right',
            'display': 'inline',
            'cursor': 'pointer',
            'padding': '0px 0px 0px 5px'
        }
    });
    panel464256.unload();
} else {
    console.log('NO CONTROL PANEL!!!', 'inputParams464256.isControlPanel', inputParams464256.isControlPanel, 'checkPlugin464256()', checkPlugin464256());
    inputParams464256.heightPanel = '0px';
}

if (checkPlugin464256()) {
    //Debug!!!
    console.log('Creating Flash Banner');
    var flash464256 = new Flash464256({
        nameId: 'afFlashFullScreen',
        movie: inputParams464256.movieSrc,
        width: inputParams464256.widthCreative,
        height: inputParams464256.heightCreative,
        heightPanel: inputParams464256.heightPanel,
        param: {
            wmode: inputParams464256.wmode,
            menu: 'true',
            allowScriptAccess: 'always',
            allowFullScreen: 'false',
            quality: 'best',
            loop: 'true',
            bgColor: '#ffffff',
            flashVars: inputParams464256.flashVars
        }
    });
    flash464256.unload();
    if (inputParams464256.isCountDown) countDown464256();
} else {
    console.log('Creating Image Banner');
    var defaultImg464256 = new DefaultImage464256({
            href: inputParams464256.reference,
            target: inputParams464256.target
        }, {
            src: inputParams464256.imageSrc,
            width: inputParams464256.widthImg,
            height: inputParams464256.heightImg,
            border: '0'
        },
        inputParams464256.heightPanel);
    defaultImg464256.unload();
    countDown464256();
}